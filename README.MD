# Rameter

[![npm version](https://img.shields.io/npm/v/rameter.svg)](https://www.npmjs.com/package/rameter)

## What is Rameter?

**Rameter** is a NodeJS based load test/performance test tool inspired by [Jmeter](https://jmeter.apache.org/), [Locust](https://locust.io/), [K6](https://k6.io/).

The name "Rameter" do come from Ram(from AOC) + (J)meter.

## Why do I make Rameter?

- I like the code-driven way of Locust & K6.
- I like the web dashboard UI of Locust
- I like the detail HTML test report generated by Jmeter.
- I like the idea that we can write load test in JS like K6 do, but I want native Javascript library support.

## why Rameter?

- Use it if you want to write some simple nodeJS script to do load test to your API.
- Use it if you are using Jmeter, and you feel difficult about how to write dynamic logics with the testing endpoints.
- Use it if you are using Locust, but you want to generate pretty HTML test report like Jmeter do.
- Use it if you are using K6, but you want to use NodeJS native libraries, and you do not need the ultra performance of K6.

## Features?

- Define multiple user groups & dynamic scenario.
- Support web dashboard UI during test running.
- Support distributed mode.
- Support Jmeter format CSV output, hence you can use Jmeter to generate HTML report.

----

## install
```
npm i rameter
```

## Hello World
```javascript
import { Rameter, HttpRequestSampler, sleep, UserModelConfig } from "rameter";

const run = async () => {
  const rameter = new Rameter();

  /**
   * up-lifting
   */
  await rameter.runStandalone({
    master: {
      host: "localhost",
      port: 3001,
    }
  });

  /**
   * define global context
   */
  rameter.exportGlobalContext({});

  /**
   * define user groups
   */
  rameter.defineUserGroup("members");

  /**
   * define user test scenario
   */
  rameter.defineUserScenario("hello scenario", async ({ globalContext, nodeContext, userContext, userId }) => {
    try {
      // call an HTTP endpoint
      await HttpRequestSampler.request({
        method: "GET",
        url: `http://localhost:8080/hello`,
      });
    } catch (e) {
      console.error(e);
    } finally {
      await sleep(100); // think time
    }
  });

  await rameter.readyTest();

  /**
   * Trigger the load test
   */
  await rameter.runUntilFinished([
    {
      userModel: UserModelConfig.stepUserForTime({
        maxUsers: 20,
        steps: 10,
        rampUpTime: 10,
        holdTime: 20,
      }),
      userGroups: ["members"],
      scenarios: ["hello scenario"],
    },
  ]);

  /**
   * shutdown
   */
  await rameter.down();
};
run();
```
----

## Component Diagram

![Component Diagram](https://raw.githubusercontent.com/airicyu/rameter/main/images/Rameter%20Components.png)

## Realtime Dashboard

![Realtime dashboard](https://raw.githubusercontent.com/airicyu/rameter/main/images/web%20dashboard%20screencap.png)

----

## Samples
- [Hello World](https://github.com/airicyu/rameter/tree/main/samples/sample1-hello-world)
- [Global Context](https://github.com/airicyu/rameter/tree/main/samples/sample2-global-context)
- [User Context](https://github.com/airicyu/rameter/tree/main/samples/sample3-user-context)
- [Writing interactive scenario logic](https://github.com/airicyu/rameter/tree/main/samples/sample4-interactive-scenario)
- [Multiple User Groups & Scenarios](https://github.com/airicyu/rameter/tree/main/samples/sample5-multiple-user-groups-and-scenarios)
- [Generate Jmeter Report](https://github.com/airicyu/rameter/tree/main/samples/sample6-generate-jmeter-report)
- [Distributed Mode](https://github.com/airicyu/rameter/tree/main/samples/sample7-distributed-mode)
- [Node Context](https://github.com/airicyu/rameter/tree/main/samples/sample8-node-context)